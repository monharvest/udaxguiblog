<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced dFlip Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="/dflip/assets/css/dflip.min.css" rel="stylesheet" type="text/css">
    <link href="/dflip/assets/css/themify-icons.min.css" rel="stylesheet" type="text/css">
</head>
<body class="bg-gray-100 flex items-center justify-center h-screen">

    <div class="text-center">
        <h1 class="text-2xl font-bold mb-4">Advanced Flipbook Test (Manual Trigger)</h1>
        <p class="mb-8">This button uses a direct JavaScript click event to open the book.</p>
        
        <button id="read-book-btn" class="bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700">
            Open Test PDF
        </button>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="/dflip/assets/js/dflip.min.js" type="text/javascript"></script>

    <script>
        // Wait for the window to be fully loaded to ensure all scripts are ready
        window.onload = function() {
            // Find the button
            const readBookButton = document.getElementById('read-book-btn');

            // Add a click listener
            readBookButton.addEventListener('click', function() {
                console.log('Button clicked. Checking for jQuery and dflip...');

                if (window.jQuery && typeof window.jQuery.fn.df_flipbook === 'function') {
                    console.log('jQuery and df_flipbook are available. Opening book...');
                    
                    // The options for the flipbook
                    const options = {
                        source: 'https://pub-1e39fb82299f4903ab072a7c0ee58083.r2.dev/1758918183947-%D0%9F%D1%83%D1%83%D0%BB%D0%B8%D0%B9%D0%BD%20%D0%B7%D0%B0%D1%80%D0%BB%D0%B0%D1%81%D0%B0%D0%BD%20%D1%81%D0%B0%D0%B9%D0%BD%20%D0%BC%D1%8D%D0%B4%D1%8D%D1%8D1_compressed.pdf',
                        webgl: true,
                        hard: 'cover'
                    };
                    
                    // Manually trigger the flipbook
                    window.jQuery(document.body).df_flipbook(options);

                } else {
                    console.error('Error: jQuery or the dflip library is not ready.');
                    alert('Flipbook library is not ready. Please try again.');
                }
            });
        };
    </script>

</body>
</html>
